<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion √âtats des Lieux</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Section Authentification -->
    <div id="auth-section" class="section">
        <div class="container-auth">
            <h1>Gestion d'√âtats des Lieux</h1>

            <div class="auth-forms">
                <div class="form-container">
                    <h2>Connexion</h2>
                    <form id="login-form">
                        <input type="email" id="login-email" placeholder="Email" required>
                        <input type="password" id="login-password" placeholder="Mot de passe" required>
                        <button type="submit">Se connecter</button>
                    </form>
                </div>

                <div class="form-container">
                    <h2>Inscription</h2>
                    <form id="register-form">
                        <input type="text" id="register-nom" placeholder="Nom" required>
                        <input type="email" id="register-email" placeholder="Email" required>
                        <input type="password" id="register-password" placeholder="Mot de passe" required>
                        <button type="submit">S'inscrire</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Section Liste des Biens -->
    <div id="biens-section" class="section hidden">
        <nav class="navbar">
            <h1>Mes Biens Immobiliers</h1>
            <div>
                <span id="user-name"></span>
                <button id="logout-btn" class="btn-secondary">D√©connexion</button>
            </div>
        </nav>

        <div class="container">
            <div class="section-header">
                <h2>Mes Biens</h2>
                <button id="add-bien-btn" class="btn-primary">+ Ajouter un bien</button>
            </div>

            <div id="biens-list" class="items-grid"></div>
        </div>

        <!-- Modal pour ajouter un bien -->
        <div id="bien-modal" class="modal hidden">
            <div class="modal-content">
                <h3>Nouveau Bien Immobilier</h3>
                <input type="text" id="bien-nom" placeholder="Nom du bien (ex: Appartement Paris 15)">
                <input type="text" id="bien-adresse" placeholder="Adresse compl√®te">
                <div class="modal-actions">
                    <button id="save-bien-btn" class="btn-primary">Cr√©er</button>
                    <button class="close-modal btn-secondary">Annuler</button>
                </div>
            </div>
        </div>

        <!-- Modal pour modifier un bien -->
        <div id="edit-bien-modal" class="modal hidden">
            <div class="modal-content">
                <h3>Modifier le Bien</h3>
                <input type="text" id="edit-bien-nom" placeholder="Nom du bien">
                <input type="text" id="edit-bien-adresse" placeholder="Adresse compl√®te">
                <div class="modal-actions">
                    <button id="update-bien-btn" class="btn-primary">Enregistrer</button>
                    <button class="close-modal btn-secondary">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Section D√©tails du Bien -->
    <div id="bien-detail-section" class="section hidden">
        <nav class="navbar">
            <button id="back-btn" class="btn-secondary">‚Üê Retour</button>
            <h1 id="bien-name"></h1>
            <div>
                <button id="view-etats-btn" class="btn-secondary">üìã √âtats r√©alis√©s</button>
                <button id="demarrer-etat-btn" class="btn-success">üöÄ D√©marrer un √©tat des lieux</button>
                <button id="generate-pdf-btn" class="btn-secondary">üìÑ PDF</button>
            </div>
        </nav>

        <div class="container">
            <div class="bien-info">
                <p><strong>Adresse:</strong> <span id="bien-adresse-display"></span></p>
            </div>

            <!-- Ajout d'objets et sections -->
            <div class="add-objet-section">
                <h3>Ajouter des √©l√©ments</h3>
                <div class="add-buttons">
                    <button id="add-section-btn" class="btn-secondary">+ Ajouter une section</button>
                    <button id="add-objet-btn" class="btn-primary">+ Ajouter un √©l√©ment</button>
                </div>
            </div>

            <!-- Modal pour ajouter une section -->
            <div id="section-modal" class="modal hidden">
                <div class="modal-content">
                    <h3>Nouvelle Section</h3>
                    <input type="text" id="section-nom" placeholder="Nom de la section (ex: Salle de bain, Salon...)">
                    <div class="modal-actions">
                        <button id="save-section-btn" class="btn-primary">Cr√©er</button>
                        <button class="close-modal btn-secondary">Annuler</button>
                    </div>
                </div>
            </div>

            <!-- Modal pour ajouter un objet -->
            <div id="objet-modal" class="modal hidden">
                <div class="modal-content">
                    <h3>Nouvel √âl√©ment</h3>
                    <input type="text" id="objet-nom" placeholder="Nom de l'√©l√©ment">
                    <input type="text" id="objet-description" placeholder="Description (optionnel)">
                    <select id="objet-section">
                        <option value="">Sans section</option>
                    </select>
                    <div class="modal-actions">
                        <button id="save-objet-btn" class="btn-primary">Cr√©er</button>
                        <button class="close-modal btn-secondary">Annuler</button>
                    </div>
                </div>
            </div>

            <!-- Tableau de l'√©tat des lieux -->
            <div class="etat-lieux-section">
                <h3>√âtat des Lieux</h3>
                <div id="etat-container">
                    <p id="empty-message" class="empty-state hidden">Aucun √©l√©ment. Ajoutez des sections et des √©l√©ments pour cr√©er l'√©tat des lieux.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Section Liste des √âtats des Lieux -->
    <div id="etats-list-section" class="section hidden">
        <nav class="navbar">
            <button id="back-from-etats-btn" class="btn-secondary">‚Üê Retour au bien</button>
            <h1>√âtats des Lieux R√©alis√©s</h1>
            <button id="demarrer-etat-from-list-btn" class="btn-success">üöÄ D√©marrer un √©tat des lieux</button>
        </nav>

        <div class="container">
            <div id="etats-list" class="items-grid"></div>
        </div>
    </div>

    <!-- Section Consultation/Modification d'un √âtat des Lieux -->
    <div id="etat-detail-section" class="section hidden">
        <nav class="navbar">
            <button id="back-from-etat-btn" class="btn-secondary">‚Üê Retour</button>
            <h1 id="etat-title"></h1>
            <button id="generate-etat-pdf-btn" class="btn-success">üìÑ G√©n√©rer PDF</button>
        </nav>

        <div class="container">
            <div class="etat-info">
                <p><strong>Type:</strong> <span id="etat-type-display"></span></p>
                <p><strong>Locataire:</strong> <span id="etat-locataire-display"></span></p>
                <p><strong>Date:</strong> <span id="etat-date-display"></span></p>
            </div>

            <!-- Tableau de l'√©tat des lieux -->
            <div class="etat-lieux-section">
                <h3>√âtat des Lieux</h3>
                <div id="etat-detail-container">
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour d√©marrer un √©tat des lieux -->
    <div id="demarrer-etat-modal" class="modal hidden">
        <div class="modal-content">
            <h3>D√©marrer un nouvel √©tat des lieux</h3>
            <label>
                Type d'√©tat des lieux:
                <select id="etat-type">
                    <option value="entree">√âtat d'entr√©e (vierge)</option>
                    <option value="sortie">√âtat de sortie</option>
                </select>
            </label>
            <div id="etat-entree-selector" class="hidden">
                <label>
                    S√©lectionner l'√©tat d'entr√©e:
                    <select id="etat-entree-id"></select>
                </label>
            </div>
            <label>
                Nom du locataire (optionnel):
                <input type="text" id="etat-locataire" placeholder="Nom du locataire">
            </label>
            <div class="modal-actions">
                <button id="start-etat-btn" class="btn-primary">D√©marrer</button>
                <button class="close-modal btn-secondary">Annuler</button>
            </div>
        </div>
    </div>

    <div id="message" class="message hidden"></div>
    <div id="loading" class="loading hidden">Chargement...</div>

    <script src="app.js"></script>
</body>
</html>
